theme_bw()
crs(ndvi)
install.packages("giscoR")
# 1. Load the NDVI raster (adjust path if needed)
ndvi <- rast("../data/copernicus_ndvi_300m/NDVI_20210201T000000Z.tif")
# 2. Get NUTS level 2 for Germany from gisco
#   country = "DE" filters Germany directly
nuts2_de <- giscoR::gisco_get_nuts(
year    = "2021",   # or another year if you prefer
epsg    = 4326,     # default CRS; we'll reproject to raster
resolution = "3",   # lower = higher resolution; "3" is usually fine
nuts_level = 2,
country = "DE"
)
# 3. Reproject NUTS polygons to NDVI CRS
nuts2_de <- st_transform(nuts2_de, crs(ndvi))
# 5. Plot NDVI with Germany NUTS-2 borders
plot(ndvi_de, main = "NDVI (2021-02-01) with Germany NUTS-2 Borders")
# 5. Plot NDVI with Germany NUTS-2 borders
plot(ndvi, main = "NDVI (2021-02-01) with Germany NUTS-2 Borders")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2)
ndvi <- rast("../data/copernicus_ndvi_300m/NDVI_20210201T000000Z.tif")
nuts1_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 1,
country = "DE"
)
nuts1_de <- st_transform(nuts1_de, crs(ndvi))
nuts2_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 2,
country = "DE"
)
nuts2_de <- st_transform(nuts2_de, crs(ndvi))
plot(ndvi, main = "NDVI (2021-02-01) with Germany NUTS-2 Borders")
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2)
plot(ndvi, main = "NDVI (2021-02-01) with Germany NUTS-2 Borders")
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(ndvi, main = "NDVI (2021-02-01) with Germany NUTS-2 Borders")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(ndvi)
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
ndvi <- rast("../data/copernicus_ndvi_300m/NDVI_20240511T000000Z.tif")
nuts1_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 1,
country = "DE"
)
nuts1_de <- st_transform(nuts1_de, crs(ndvi))
nuts2_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 2,
country = "DE"
)
nuts2_de <- st_transform(nuts2_de, crs(ndvi))
plot(ndvi)
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
ndvi <- rast("../data/copernicus_ndvi_300m/")
ndvi <- rast("../data/copernicus_ndvi_300m/NDVI_20250201T000000Z.tif")
nuts1_de <- ginuts1_de <- ginuts1_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 1,
country = "DE"
)
nuts1_de <- st_transform(nuts1_de, crs(ndvi))
nuts2_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 2,
country = "DE"
)
nuts2_de <- st_transform(nuts2_de, crs(ndvi))
plot(ndvi)
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
tile_vec <- c(
"32UNA", "32UPA", "32UQA",
"32UNV", "32UPV", "32UQV", "33UUQ",
"32UNU", "32UPU", "32UQU", "33UUP",
"32TNT", "32TPT", "32TQT"
)
# base URL
base_url <- "https://download.geoservice.dlr.de/S2_L3A_WASP/files"
year  <- 2021L
month <- 5L
# assume the same pattern for all tiles
date_stamp <- sprintf("%04d%02d15-000000-000", year, month)
# -> "20210515-000000-000"
bands <- c("B4", "B8")
out_dir <- "../data/sentinel-2-tiles/"
#dir.create(out_dir, showWarnings = FALSE, recursive = TRUE)
download_wasp_tile <- function(tile_id) {
# tile_id, e.g. "32UNA"
zone      <- substr(tile_id, 1, 2)  # "32"
lat_band  <- substr(tile_id, 3, 3)  # "U" or "T"
grid_sq   <- substr(tile_id, 4, 5)  # "NA", "PA", ...
# Remote path pieces: /32/U/NA/2021/
path_prefix <- paste(base_url, zone, lat_band, grid_sq, year, sep = "/")
# Folder name for that month/tile, e.g.:
# SENTINEL2X_20210515-000000-000_L3A_T32UNA_C_V1-2
prod_name <- sprintf("SENTINEL2X_%s_L3A_T%s_C_V1-2", date_stamp, tile_id)
prod_dir  <- paste(path_prefix, prod_name, sep = "/")
# Local subfolder per tile
tile_out_dir <- file.path(out_dir, tile_id)
dir.create(tile_out_dir, showWarnings = FALSE, recursive = TRUE)
for (b in bands) {
# File name, e.g.:
# SENTINEL2X_20210515-000000-000_L3A_T32UNA_C_V1-2_FRC_B4.tif
fname <- sprintf("%s_FRC_%s.tif", prod_name, b)
url   <- paste(prod_dir, fname, sep = "/")
dest  <- file.path(tile_out_dir, fname)
message("Downloading ", tile_id, " ", b, " from:\n  ", url)
tryCatch(
{
download.file(url, destfile = dest, mode = "wb", quiet = TRUE)
message("  -> saved to ", dest)
},
error = function(e) {
message("  !! Failed for ", tile_id, " ", b, ": ", conditionMessage(e))
}
)
}
}
for (tile in tile_vec) {
print(tile)
download_wasp_tile(tile)
}
# 1. Folder where your 2021-05 B4 tiles are stored
base_dir <- "../data/sentinel-2-tiles/"  # <-- change this
# All B4 files (one per tile)
b4_files <- list.files(
base_dir,
pattern = "FRC_B4\\.tif$",
full.names = TRUE,
recursive = TRUE
)
b4_files
length(b4_files)
bbox_list <- lapply(b4_files, function(f) {
r <- terra::rast(f)
ext <- terra::ext(r)
poly <- terra::as.polygons(ext, crs = terra::crs(r))
sf_poly <- sf::st_as_sf(poly)
sf_poly$tile_file <- basename(f)
sf_poly$tile_id  <- sub(".*_L3A_T(.*)_C.*", "\\1", sf_poly$tile_file)
sf_poly
})
tiles_sf <- bind_rows(bbox_list)
bbox_list
Choose a common CRS for all tiles (LAEA Europe)
# Choose a common CRS for all tiles (LAEA Europe)
common_crs <- 3035  # EPSG:3035 / 4326
base_dir <- "../data/sentinel-2-tiles/"  # <-- change this
# All B4 files (one per tile)
b4_files <- list.files(
base_dir,
pattern = "FRC_B4\\.tif$",
full.names = TRUE,
recursive = TRUE
)
length(b4_files)
bbox_list <- lapply(b4_files, function(f) {
r <- terra::rast(f)
ext <- terra::ext(r)
# polygon in the raster's native CRS
poly <- terra::as.polygons(ext, crs = terra::crs(r))
sf_poly <- sf::st_as_sf(poly)
# reproject to common CRS
sf_poly <- sf::st_transform(sf_poly, common_crs)
sf_poly$tile_file <- basename(f)
sf_poly$tile_id   <- sub(".*_L3A_T(.*)_C.*", "\\1", sf_poly$tile_file)
sf_poly
})
bbox_list
tiles_sf <- do.call(rbind, bbox_list)
st_crs(tiles_sf)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "grey40", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "grey10", linewidth = 0.4)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "green", linewidth = 0.4)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "green", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, color = "red", linewidth = 0.8)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "green", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, color = "red", linewidth = 0.8) +
coord_sf() +
theme_minimal() +
labs(
title = "Sentinel-2 L3A WASP tiles (B4) covering Bavaria",
subtitle = "NUTS level 1 and 2 (giscoR)",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "green", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, color = "red", linewidth = 0.8) +
coord_sf() +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "green", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, aes(color = tile_id), linewidth = 0.8) +
coord_sf() +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, aes(color = tile_id), linewidth = 0.8) +
coord_sf() +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
base_dir <- "../data/sentinel-2-tiles/"
b4_files <- list.files(
base_dir,
pattern = "FRC_B4\\.tif$",
full.names = TRUE,
recursive = TRUE
)
length(b4_files)
common_crs <- 4326  # EPSG:3035 / 4326
bbox_list <- lapply(b4_files, function(f) {
r <- terra::rast(f)
ext <- terra::ext(r)
poly <- terra::as.polygons(ext, crs = terra::crs(r))
sf_poly <- sf::st_as_sf(poly)
sf_poly <- sf::st_transform(sf_poly, common_crs)
sf_poly$tile_file <- basename(f)
sf_poly$tile_id   <- sub(".*_L3A_T(.*)_C.*", "\\1", sf_poly$tile_file)
sf_poly
})
tiles_sf <- do.call(rbind, bbox_list)
target_crs <- st_crs(tiles_sf)
nuts1_de <- giscoR::gisco_get_nuts(
year       = "2021",     # or "2016" etc.
epsg       = 4326,       # gisco default (WGS84)
nuts_level = 1,
country    = "DE"
)
nuts2_de <- giscoR::gisco_get_nuts(
year       = "2021",
epsg       = 4326,
nuts_level = 2,
country    = "DE"
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, aes(color = tile_id), linewidth = 0.8) +
coord_sf() +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, fill = NA, aes(color = tile_id), linewidth = 0.8) +
coord_sf(
xlim = c(8, 15),
ylim = c(47, 51),
expand = FALSE
) +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8) +
coord_sf(
xlim = c(8, 15),
ylim = c(47, 51),
expand = FALSE
) +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(
xlim = c(8, 15),
ylim = c(47, 51),
expand = FALSE
) +
theme_minimal() +
labs(
title = "14 tiles covering bavaria",
x = NULL, y = NULL
)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(xlim = c(8, 15), ylim = c(46, 51), expand = FALSE) +
theme_minimal() +
labs(title = "14 tiles covering bavaria", x = NULL, y = NULL)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(xlim = c(8, 15), ylim = c(46.5, 51), expand = FALSE) +
theme_minimal() +
labs(title = "14 tiles covering bavaria", x = NULL, y = NULL)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(xlim = c(8, 15), ylim = c(46.5, 51), expand = FALSE) +
theme_minimal() +
labs(title = "14 tiles covering bavaria", x = "Lon", y = "Lat")
? giscoR::gisco_get_nuts
base_dir <- "../data/sentinel-2-tiles/"
b4_files <- list.files(base_dir, pattern = "FRC_B4\\.tif$", full.names = TRUE, recursive = TRUE)
length(b4_files)
common_crs <- 4326  # EPSG:3035 / 4326
bbox_list <- lapply(b4_files, function(f) {
r <- terra::rast(f)
ext <- terra::ext(r)
poly <- terra::as.polygons(ext, crs = terra::crs(r))
sf_poly <- sf::st_as_sf(poly)
sf_poly <- sf::st_transform(sf_poly, common_crs)
sf_poly$tile_file <- basename(f)
sf_poly$tile_id   <- sub(".*_L3A_T(.*)_C.*", "\\1", sf_poly$tile_file)
sf_poly
})
tiles_sf <- do.call(rbind, bbox_list)
target_crs <- st_crs(tiles_sf)
nuts1_de <- giscoR::gisco_get_nuts(year = "2021", epsg = 4326, nuts_level = 1,
resolution = "01", country = "DE")
nuts2_de <- giscoR::gisco_get_nuts(year = "2021", epsg = 4326, nuts_level = 2,
resolution = "01", country = "DE")
# nuts1_de <- st_transform(nuts1_de, target_crs)
# nuts2_de <- st_transform(nuts2_de, target_crs)
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(xlim = c(8, 15), ylim = c(46.5, 51), expand = FALSE) +
theme_minimal() +
labs(title = "14 tiles covering bavaria", x = "Lon", y = "Lat")
tiles_sf
tiles_sf$tile_id <- factor(tiles_sf$tile_id, levels = tile_vec)
tiles_sf <- tiles_sf[order(tiles_sf$tile_id), ]
ggplot() +
geom_sf(data = nuts1_de, fill = NA, color = "blue", linewidth = 1) +
geom_sf(data = nuts2_de, fill = NA, color = "black", linewidth = 0.4) +
geom_sf(data = tiles_sf, aes(color = tile_id, fill = tile_id), linewidth = 0.8, alpha = 0.3 ) +
coord_sf(xlim = c(8, 15), ylim = c(46.5, 51), expand = FALSE) +
theme_minimal() +
labs(title = "14 tiles covering bavaria", x = "Lon", y = "Lat")
library(terra)
tile_vec <- c(
"32UNA", "32UPA", "32UQA",
"32UNV", "32UPV", "32UQV", "33UUQ",
"32UNU", "32UPU", "32UQU", "33UUP",
"32TNT", "32TPT", "32TQT"
)
base_dir <- "../data/sentinel-2-tiles"
for (tile in tile_vec) {
tile_dir <- file.path(base_dir, tile)
# Files end with _B4.tif and _B8.tif
b4_file <- list.files(tile_dir, pattern = "_B4\\.tif$", full.names = TRUE)
b8_file <- list.files(tile_dir, pattern = "_B8\\.tif$", full.names = TRUE)
if (length(b4_file) == 0 || length(b8_file) == 0) {
warning("Missing B4 or B8 in ", tile_dir, " – skipping.")
next
}
print(b4_file[1])
print(b8_file[1])
# b4 <- rast(b4_file[1])
# b8 <- rast(b8_file[1])
#
# # NDVI formula
# ndvi <- (b8 - b4) / (b8 + b4)
# names(ndvi) <- "NDVI"
#
# # Save inside the tile folder
# out_file <- file.path(tile_dir, paste0(tile, "_NDVI.tif"))
# writeRaster(ndvi, out_file, overwrite = TRUE)
#
# message("Saved NDVI for ", tile)
}
tile_vec <- c(
"32UNA", "32UPA", "32UQA",
"32UNV", "32UPV", "32UQV", "33UUQ",
"32UNU", "32UPU", "32UQU", "33UUP",
"32TNT", "32TPT", "32TQT"
)
base_dir <- "../data/sentinel-2-tiles"
for (tile in tile_vec) {
tile_dir <- file.path(base_dir, tile)
# Files end with _B4.tif and _B8.tif
b4_file <- list.files(tile_dir, pattern = "_B4\\.tif$", full.names = TRUE)
b8_file <- list.files(tile_dir, pattern = "_B8\\.tif$", full.names = TRUE)
if (length(b4_file) == 0 || length(b8_file) == 0) {
warning("Missing B4 or B8 in ", tile_dir, " – skipping.")
next
}
b4 <- rast(b4_file[1])
b8 <- rast(b8_file[1])
# NDVI formula
ndvi <- (b8 - b4) / (b8 + b4)
names(ndvi) <- "NDVI"
# Save inside the tile folder
out_file <- file.path(tile_dir, paste0(tile, "_NDVI.tif"))
writeRaster(ndvi, out_file, overwrite = TRUE)
message("Saved NDVI for ", tile)
}
library(terra)
terra::plot(rast("../data/sentinel-2-tiles/32UNA/32UNA_NDVI.tif"))
terra::plot(rast("../data/sentinel-2-tiles/32TPT/32TPT_NDVI.tif"))
terra::plot(rast("../data/sentinel-2-tiles/32UPV/32UPV_NDVI.tif"))
r <- rast("../data/sentinel-2-tiles/32UPV/32UPV_NDVI.tif")
terra::plot(r)
crs(r)
ct <- rast("../data/crop_type_tif/croptypes_2021.tif")
ct <- rast("../data/crop_type_tif/croptypes_2021.tif")
crop_classes <- read_delim("../data/crop_type_tif/LEGEND_CropTypes.txt", delim = "\t")
library(readr)
crop_classes <- read_delim("../data/crop_type_tif/LEGEND_CropTypes.txt", delim = "\t")
colnames(crop_classes) <- c("code", "label")
levels(r) <- data.frame(value = crop_classes$code, crop = crop_classes$label)
# colors for each crop type for plotting purposes
palette_crop <- c("#FFFFFF","#0070FF","#00BFFF","#87CEFA","#ADD8E6","#F4A460","#FFA500","#FF8C00","#FF00FF","#D2B48C",
"#8B4513","#8400A8","#FFFF99","#D1FF73","#89CD66","#4E7500","#FFBEBE","#FF7F50","#004C70","#CCCCCC")
palette_crop <- palette_crop[1:nrow(crop_classes)]
levels(r)
ct_11 <- mask(ct, ct == 11, maskvalues = FALSE)
plot(ct_11, main = "Crop Type = 11 (Winter Wheat)")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
library(sf)
uts1_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 1,
country = "DE"
)
nuts1_de <- st_transform(nuts1_de, crs(ct_11))
nuts1_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 1,
country = "DE"
)
nuts1_de <- st_transform(nuts1_de, crs(ct_11))
nuts2_de <- giscoR::gisco_get_nuts(
year    = "2021",
epsg    = 4326,
resolution = "3",
nuts_level = 2,
country = "DE"
)
nuts2_de <- st_transform(nuts2_de, crs(ct_11))
plot(ct_11, main = "Crop Type = 11 (Winter Wheat)")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(ct_11, main = "Crop Type = 11 (Winter Wheat)", color = "green")
?terra::plot
plot(ct_11, main = "Crop Type = 11 (Winter Wheat)", background = "black")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "blue", lwd = 2)
plot(st_geometry(nuts1_de), add = TRUE, border = "white", lwd = 2)
ct_11_mask <- (ct == 11)
plot(ct_11_mask, main = "Crop Type = 11 (Winter Wheat)", background = "black")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(st_geometry(nuts1_de), add = TRUE, border = "white", lwd = 2)
plot(ct_11_mask, main = "Crop Type = 11 (Winter Wheat)", background = "black")
plot(st_geometry(nuts2_de), add = TRUE, border = "red", lwd = 2, alpha = 0.4)
plot(ct_11_mask, main = "Crop Type = 11 (Winter Wheat)", background = "black")
plot(st_geometry(nuts1_de), add = TRUE, border = "white", lwd = 2)
